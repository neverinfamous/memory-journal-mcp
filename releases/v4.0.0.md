# v4.0.0 - GitHub Issue Lifecycle & MCP 2025-11-25 Compliance

**Release Date:** January 16, 2026

## Highlights

This major release introduces **GitHub Issue Lifecycle Management** with automatic journal linking, full **MCP 2025-11-25 compliance** with structured output validation, and **Dynamic Context Management** enhancements. It also updates the minimum Node.js requirement to 24+.

## Breaking Changes

- **Node.js 24+ Required** — `engines.node` updated from ≥18.0.0 to ≥24.0.0
- **Structured Output** — 5 tools now return `structuredContent` alongside text `content`. Clients that don't understand `structuredContent` will fall back to the text representation.

## New Features

### GitHub Issue Lifecycle Tools (+2 tools: 29→31)

- **`create_github_issue_with_entry`** — Creates GitHub issue AND linked journal entry in one operation
  - New `initial_status` parameter to set Kanban column (e.g., "Backlog", "Ready")
  - Accepts `project_number` to auto-add issue to GitHub Project v2
- **`close_github_issue_with_entry`** — Closes issue AND creates resolution entry with significance

### New Resources (+2: 16→18)

- **`memory://briefing`** (enhanced) — Now includes `userMessage` for agents to relay to users, template resource discovery, and client compatibility notes
- **`memory://instructions`** (new) — Universal access to server behavioral guidance with tiered levels (`?level=essential|standard|full`)

### New Prompt (+1: 14→15)

- **`confirm-briefing`** — Session context acknowledgment for users to understand what context the agent received

### MCP 2025-11-25 Compliance

- **`outputSchema`** — 5 tools with structured output validation: `get_recent_entries`, `search_entries`, `search_by_date_range`, `get_entry_by_id`, `get_statistics`
- **`lastModified` Annotations** — Dynamic resources now include ISO 8601 timestamps
- **structuredContent + Text Fallback** — Tools return both structured JSON and formatted text for client compatibility

## Bug Fixes

- **Semantic Search Timing** — Fixed race condition where search returned 0 results immediately after rebuild
- **Auto-Indexing** — New and updated entries are now immediately available for semantic search
- **CI Status Discrepancy** — Resources now use latest *completed* run for status determination
- **GitHub Actions Resource** — `memory://actions/recent` now fetches live workflow runs from GitHub API
- **Search Filter Accuracy** — Fixed `search_entries` ignoring filters when `query` is empty
- **Vector Index Stats** — Fixed `memory://health` reporting 0 indexed entries after rebuild
- **Trivy Security Scan** — Fixed workflow that hadn't run since September 2025
- **Docker Latest Tag** — Fixed `latest` tag not being applied on `workflow_run` triggered builds

## Documentation

- Added hybrid workflow documentation explaining MCP + gh CLI approach for GitHub management
- Enhanced wiki pages with Dynamic Context Management patterns
- Documented AntiGravity IDE workarounds for clients that don't auto-inject ServerInstructions

---

## Installation

**npm:**
```bash
npm install -g memory-journal-mcp@4.0.0
```

**Docker:**
```bash
docker pull writenotenow/memory-journal-mcp:4.0.0
```

**Full Changelog:** [v3.1.5...v4.0.0](https://github.com/neverinfamous/memory-journal-mcp/compare/v3.1.5...v4.0.0)
